var A=Object.defineProperty,F=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var L=(r,t,s)=>t in r?A(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,y=(r,t)=>{for(var s in t||(t={}))E.call(t,s)&&L(r,s,t[s]);if(T)for(var s of T(t))z.call(t,s)&&L(r,s,t[s]);return r},w=(r,t)=>F(r,M(t));import{j as l,a as e,L as N,M as f,F as v,r as g,R as P,b as I,c as W,d as H,B as q}from"./vendor.fbcc1a5a.js";const J=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerpolicy&&(n.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?n.credentials="include":a.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}};J();var Y="/read-track/assets/finished-illustration.fa416ad6.svg";const D=()=>l("section",{className:"relative bg-browny max-w-5xl mx-auto h-auto rounded-3xl my-20 p-10 ",children:[e("h2",{className:"text-browny-dark text-4xl font-bold",children:"Finished Reading"}),e("img",{className:"absolute w-56 -bottom-3 right-10",src:Y,alt:"reading-illustration"})]});var G="/read-track/assets/hero-illustration.8e885380.svg";const K=()=>l("header",{className:"flex justify-between bg-browny max-w-5xl mx-auto rounded-3xl mt-20 p-10",children:[l("div",{className:"flex flex-col justify-between",children:[l("div",{children:[e("h1",{className:"text-browny-dark text-6xl font-bold",children:"Read Tracer"}),l("p",{className:"text-browny-dark text-xl my-5 font-semibold",children:["Search and browse a collection of books and add them to your library. You can trace the progress of each book and add books to a want to read list."," "]})]}),e(N,{to:"/search",className:"bg-browny-dark text-browny py-5 px-10 text-2xl rounded-xl w-fit",children:"Search Books"})]}),e("img",{className:"w-96",src:G,alt:"hero-illustration"})]});var Q="/read-track/assets/reading-illustration.03083267.svg";const U=()=>l("section",{className:"relative bg-browny max-w-5xl mx-auto h-auto rounded-3xl my-20 p-10 ",children:[e("h2",{className:"text-browny-dark text-4xl font-bold",children:"Currently Reading"}),e("img",{className:"absolute w-56 -top-12 right-10",src:Q,alt:"reading-illustration"})]});var V="/read-track/assets/whishlist-illustration.4504d9bf.svg";const X=()=>l("section",{className:"relative bg-browny max-w-5xl mx-auto h-auto rounded-3xl my-20 p-10",children:[e("h2",{className:"text-browny-dark text-4xl font-bold",children:"Want to Read"}),e("img",{className:"absolute w-56 -bottom-3 right-10",src:V,alt:"reading-illustration"})]});var Z="/read-track/assets/arrow.89e658e8.svg";const _=({book:r,handleClick:t})=>{const{title:s,imageLinks:c,shelf:a,authors:n}=r;console.log(c);let i,m;return n?i=n.length>1?n.join(", "):n[0]:i="no authors",c?m=c.thumbnail:m="https://via.placeholder.com/128x193?text=No+Image",l("li",{className:"relative flex flex-col items-center justify-center gap-3 w-56 text-left flex-auto my-4",children:[l("span",{className:"relative",children:[e("div",{className:"bg-cover bg-center bg-no-repeat w-56 h-72",style:{backgroundImage:`url("${m}")`}}),l(f,{as:"div",className:"absolute bottom-0 right-2",children:[e(f.Button,{className:"drop-shadow-2xl",children:e("img",{src:Z,alt:"123",className:" bg-browny rounded-full drop-shadow-2xl w-14 border-4 border-browny-dark"})}),l(f.Items,{className:"absolute bg-browny-dark p-5 rounded-lg w-72 flex flex-col gap-3 items-start z-10 text-white",children:[e(f.Item,{as:"div",className:"text-gray-200",children:"Move to..."}),e(f.Item,{children:l("button",{onClick:()=>t(r,"currentlyReading"),type:"button",className:a==="currentlyReading"?"italic font-bold":"",children:["Currently Reading ",a==="currentlyReading"?"\u2713":""]})}),e(f.Item,{children:l("button",{onClick:()=>t(r,"wantToRead"),type:"button",className:a==="wantToRead"?"italic font-bold":"",children:["Want to Read ",a==="wantToRead"?"\u2713":""]})}),e(f.Item,{children:l("button",{onClick:()=>t(r,"read"),type:"button",className:a==="read"?"italic font-bold":"",children:["Finished Reading ",a==="read"?"\u2713":""]})}),e(f.Item,{children:l("button",{onClick:()=>t(r,"none"),type:"button",className:a==="none"?"italic font-bold":"",children:["None ",a==="none"?"\u2713":""]})})]})]})]}),l("div",{className:"flex flex-col",children:[e("h2",{className:"truncate w-56",children:s}),e("p",{className:"w-56",children:i})]})]})},k=({name:r,books:t,handleClick:s})=>e(v,{children:t.length?e("ul",{className:"max-w-5xl mx-auto rounded-3xl p-10 grid grid-cols-3 justify-items-center",children:t.map(c=>e(_,{book:c,handleClick:s},c.id))}):l("p",{className:"text-3xl bold max-w-5xl mx-auto pl-10",children:["Sorry, no books found on the ",r," shelf."]})});var ee="/read-track/assets/add.003f60c9.svg";const te=({getAll:r,update:t})=>{const[s,c]=g.exports.useState({currentlyReading:[],wantToRead:[],read:[]}),[a,n]=g.exports.useState(!0),[i,m]=g.exports.useState("");g.exports.useEffect(()=>{r().then(o=>{n(!0);const d=o.filter(x=>x.shelf==="currentlyReading"),h=o.filter(x=>x.shelf==="wantToRead"),u=o.filter(x=>x.shelf==="read");c(()=>({currentlyReading:d,wantToRead:h,read:u})),n(!1)}).catch(o=>{m(o),n(!1)})},[]);const b=(o,d)=>{t(o,d).then(()=>{c(d!=="none"?h=>{const u=o.shelf,x=s[o.shelf].filter(O=>O.id!==o.id);o.shelf=d;const p=[...s[d],o];return w(y({},h),{[u]:x,[d]:p})}:h=>w(y({},h),{[o.shelf]:s[o.shelf].filter(u=>u.id!==o.id)}))}).catch(h=>{m(h)})};return l(v,{children:[e(K,{}),e(U,{}),!a&&e(k,{name:"Currently Reading",books:s.currentlyReading,handleClick:b}),a&&e("p",{className:"text-center w-full text-3xl",children:"Loading..."}),e(X,{}),!a&&e(k,{name:"Want to Read",books:s.wantToRead,handleClick:b}),a&&e("p",{className:"text-center w-full text-3xl",children:"Loading..."}),e(D,{}),!a&&e(k,{name:"Finished Reading",books:s.read,handleClick:b}),a&&e("p",{className:"text-center w-full text-3xl",children:"Loading..."}),e(N,{to:"/search",className:"fixed p-3 bottom-10 right-10  text-browny bg-browny-dark rounded-full",children:e("img",{src:ee,alt:"add",className:"w-10"})})]})};var ae="/read-track/assets/results.e381c0b6.svg";const re=()=>l("section",{className:"relative bg-browny max-w-5xl mx-auto h-auto rounded-3xl my-10 p-10 ",children:[e("h2",{className:"text-browny-dark text-4xl font-bold",children:"Search Results"}),e("img",{className:"absolute w-56 -bottom-2 -right-10",src:ae,alt:"result-illustration"})]});var se="/read-track/assets/search.946feb54.svg",C="/read-track/assets/home.b726cb4c.svg";const ne=({query:r,setQuery:t})=>l("header",{className:"flex flex-col gap-3 bg-browny max-w-5xl mx-auto rounded-3xl mt-20 p-10 relative",children:[e("h1",{className:"text-browny-dark text-6xl font-bold z-10",children:"Search Book Tags"}),e("p",{className:"text-browny-dark text-3xl font-bold w-3/4 z-10",children:"You can search a list of book tags to show a list of books that matches your search term."}),e("input",{className:"w-full p-5 outline-none rounded-2xl my-4 text-2xl z-10",type:"text",name:"search",id:"search",value:r,onChange:s=>t(s.target.value),placeholder:"Search Term"}),l(N,{to:"/",className:"py-3 px-5 bg-browny-dark rounded-2xl my-4 text-2xl w-fit text-browny font-bold",children:[e("img",{className:"inline w-10 my-au",src:C,alt:"Home"})," Go back"]}),e("img",{className:"absolute w-2/4 bottom-6 right-2",src:se,alt:"search"})]}),le=({search:r,update:t,getAll:s})=>{const[c,a]=g.exports.useState([]),[n,i]=g.exports.useState(!0),[m,b]=g.exports.useState("");return g.exports.useEffect(()=>{m.length>0?(i(!0),r(m.trim()).then(d=>{d.error?a([]):s().then(h=>{d.map(u=>{h.findIndex(p=>p.id===u.id)>=0?u.shelf=h[h.findIndex(p=>p.id===u.id)].shelf:u.shelf="none"}),a(d),i(!1)})}).catch(()=>{a([]),i(!1)})):(a([]),i(!1))},[m]),l(v,{children:[e(ne,{query:m,setQuery:b}),e(re,{}),n&&e("p",{className:"text-center w-full text-3xl",children:"Loading..."}),!n&&e(k,{name:"Search Results",books:c,handleClick:(d,h)=>{t(d,h).catch(u=>{setError(u)})}}),e(N,{to:"/",className:"fixed p-3 bottom-10 right-10  text-browny bg-browny-dark rounded-full",children:e("img",{src:C,alt:"add",className:"w-10"})})]})},R="https://reactnd-books-api.udacity.com";let S=localStorage.token;S||(S=localStorage.token=Math.random().toString(36).substr(-8));const j={Accept:"application/json",Authorization:S},$=()=>fetch(`${R}/books`,{headers:j}).then(r=>r.json()).then(r=>r.books),B=(r,t)=>fetch(`${R}/books/${r.id}`,{method:"PUT",headers:w(y({},j),{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(s=>s.json()),oe=r=>fetch(`${R}/search`,{method:"POST",headers:w(y({},j),{"Content-Type":"application/json"}),body:JSON.stringify({query:r})}).catch(t=>console.log(t)).then(t=>t.json()).then(t=>t.books),ce=()=>e(v,{children:l(P,{children:[e(I,{path:"/",element:e(te,{getAll:$,update:B})}),e(I,{path:"/search",element:e(le,{search:oe,update:B,getAll:$})})]})});W.render(e(H.StrictMode,{children:e(q,{children:e(ce,{})})}),document.getElementById("root"));
